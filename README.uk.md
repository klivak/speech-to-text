# VoiceType

**Голосовий ввід тексту для Windows на базі OpenAI Whisper**

[![Python 3.9+](https://img.shields.io/badge/python-3.9+-blue.svg)](https://www.python.org/downloads/)
[![License: MIT](https://img.shields.io/badge/License-MIT-green.svg)](LICENSE)
[![Windows 10/11](https://img.shields.io/badge/platform-Windows%2010%2F11-lightgrey.svg)]()
[![CI](https://github.com/your-username/voicetype/actions/workflows/ci.yml/badge.svg)](https://github.com/your-username/voicetype/actions)

> Тримай гарячу клавішу, говори, відпусти -- текст миттєво вставляється в будь-яку програму.

<!-- ![Demo](assets/screenshots/demo.gif) -->

## Можливості

- **Два режими розпізнавання**: Локальний (офлайн, Whisper на вашому ПК) та API (хмара OpenAI)
- **Push-to-talk**: Тримайте гарячу клавішу для запису, відпустіть для розпізнавання
- **Візуальний оверлей**: Пульсуюче коло з візуалізацією амплітуди під час запису
- **Системний трей**: Швидкий доступ до налаштувань, зміни мови та пристрою
- **Плаваюча кнопка мікрофона**: Опціональна перетягувана кнопка як альтернатива гарячій клавіші
- **Кастомний словник**: Зв'язок вимовлених слів з правильними технічними термінами
- **Голосова пунктуація**: Скажіть "крапка", "кома", "новий рядок" тощо
- **Перемикання CPU/GPU**: Перемикайте між CPU та NVIDIA GPU без перезапуску
- **Темна/Світла тема**: Слідує за системною темою Windows або ручний вибір
- **Історія розпізнавань**: Пошук, експорт та статистика
- **Безпечний API ключ**: Зберігається в Windows Credential Manager, ніколи у файлах
- **Українська + English**: Дві мови з швидким перемиканням

## Швидкість розпізнавання

Час від моменту відпускання клавіші до вставки тексту (для фрази ~5 секунд):

### Локальний режим (Whisper)

| Модель | Розмір | CPU (i5/i7) | NVIDIA GPU | Точність |
|--------|--------|-------------|------------|----------|
| `tiny` | 75 MB | 1-3 сек | <1 сек | Низька |
| `base` | 150 MB | 2-5 сек | ~1 сек | Прийнятна |
| `small` | 500 MB | 3-7 сек | 1-2 сек | Хороша (рекомендовано) |
| `medium` | 1.5 GB | 8-20 сек | 2-5 сек | Дуже хороша |
| `large-v3` | 3 GB | 15-40 сек | 3-8 сек | Найкраща |

### API режим (OpenAI)

| Параметр | Значення |
|----------|----------|
| Швидкість | 1-2 секунди незалежно від ПК |
| Точність | Найкраща |
| Вартість | ~$0.006/хвилина (~0.25 грн/хвилина) |
| Потрібен інтернет | Так |
| Потрібен API ключ | Так |

### Рекомендації
- Є NVIDIA GPU -- Локальний режим, модель `small` або `medium`
- Немає GPU, але потужний CPU -- Локальний режим, модель `small`
- Слабкий ПК -- API режим
- Без інтернету -- Тільки локальний режим

## Швидкий старт

### Локальний режим (за замовчуванням, без API ключа)

```bash
# Клонувати
git clone https://github.com/your-username/voicetype.git
cd voicetype

# Встановити залежності
pip install -r requirements.txt

# Запустити
python -m src.main
```

### API режим

```bash
# Встановити
pip install -r requirements.txt

# Встановити API ключ (спосіб 1: змінна оточення)
set OPENAI_API_KEY=sk-ваш-ключ

# Або створити .env файл (спосіб 2)
copy .env.example .env
# Відредагуйте .env та додайте ключ

# Запустити
python -m src.main
# Потім перемкніть на API режим в Налаштуваннях
```

### Підтримка GPU (NVIDIA)

```bash
# Встановити з підтримкою CUDA
pip install -r requirements-gpu.txt
```

## Встановлення

### Вимоги
- **Python 3.9+** -- [python.org](https://www.python.org/downloads/)
- **FFmpeg** -- Потрібен для локального режиму Whisper
  - Завантажити з [ffmpeg.org](https://ffmpeg.org/download.html)
  - Додати до системного PATH
- **NVIDIA GPU** (опціонально) -- Для швидшого розпізнавання

### Через скрипт встановлення
```bash
install.bat
```

### Вручну
```bash
pip install -r requirements.txt       # Базові
pip install -r requirements-gpu.txt   # З підтримкою GPU
pip install -r requirements-dev.txt   # Для розробки
```

## Використання

### Гарячі клавіші
| Дія | За замовчуванням | Налаштовується |
|-----|-----------------|----------------|
| Запис (push-to-talk) | `Ctrl+Shift` (тримати) | Так |
| Перемикання мови | Не призначено | Так |
| Перемикання CPU/GPU | Не призначено | Так |

### Голосові команди пунктуації

| Команда (UK) | Команда (EN) | Результат |
|-------------|-------------|-----------|
| "крапка" | "period" / "dot" | `.` |
| "кома" | "comma" | `,` |
| "знак питання" | "question mark" | `?` |
| "знак оклику" | "exclamation mark" | `!` |
| "новий рядок" | "new line" | `\n` |
| "новий абзац" | "new paragraph" | `\n\n` |
| "двокрапка" | "colon" | `:` |
| "тире" | "dash" | ` -- ` |
| "лапки" | "quotes" | `"` |
| "три крапки" | "ellipsis" | `...` |

### Кастомний словник

Додавайте технічні терміни які Whisper може розпізнати неправильно:

| Як вимовляється | Правильний запис |
|----------------|-----------------|
| "флаттер" | Flutter |
| "пайтон" | Python |
| "реакт" | React |
| "гітхаб" | GitHub |

Редагуйте в Налаштування > вкладка Словник або в `dictionary.json`.

## Конфігурація

Налаштування зберігаються в `config.json` (створюється автоматично). Основні параметри:

| Параметр | За замовчуванням | Опис |
|----------|-----------------|------|
| Режим | Локальний | `local` або `api` |
| Мова | Українська | `uk` або `en` |
| Модель | small | Назва моделі Whisper |
| Пристрій | auto | `auto`, `cpu`, `cuda` |
| Тема | system | `system`, `light`, `dark` |
| Гаряча клавіша | ctrl+shift | Будь-яка комбінація |
| Оверлей | увімкнено | Візуальний індикатор запису |

**API ключ зберігається окремо** в Windows Credential Manager, ніколи в конфігураційних файлах.

## Безпека

- API ключі зберігаються в **Windows Credential Manager** (шифрування на рівні ОС)
- Ключі **ніколи** не записуються в config.json, логи або вихідний код
- Логи автоматично маскують будь-які патерни `sk-*`
- Pre-commit хуки виявляють випадкові коміти з секретами
- CI включає сканування секретів через TruffleHog

Див. [SECURITY.md](SECURITY.md) для повної політики безпеки.

## Розробка

```bash
# Встановити залежності для розробки
pip install -r requirements-dev.txt
pre-commit install

# Запустити тести
pytest tests/ -v

# Лінтинг
ruff check src/
ruff format --check src/

# Перевірка типів
mypy src/ --ignore-missing-imports

# Збірка exe
pyinstaller --onefile --windowed --icon=assets/icon.ico --name=VoiceType --add-data "assets;assets" src/main.py
```

## Дорожня карта

### Функціональність
- [ ] Режим безперервного запису з автовизначенням пауз
- [ ] Мультимовний режим -- автовизначення мови без перемикання
- [ ] Голосові макроси -- "вставити підпис" вставляє заданий текст
- [ ] Режим транскрипції -- запис лекцій/зустрічей у текстовий файл
- [ ] Переклад в реальному часі -- диктуєш uk, вставляється en
- [ ] Контекстні словники -- автоматичне перемикання словника залежно від активної програми
- [ ] Голосове керування -- "відмінити", "видалити останнє слово", "вибрати все"
- [ ] Інтеграція з Faster Whisper для пришвидшення в 2-4 рази
- [ ] Стрімінг -- текст з'являється в реальному часі поки говориш
- [ ] Шаблони тексту -- "лист клієнту" вставляє шаблон з полями для заповнення

### Інтерфейс
- [ ] Анімація тексту в оверлеї перед вставкою
- [ ] Міні-панель з останнім розпізнаним текстом та кнопкою редагування
- [ ] Теми оверлею (різні стилі анімації пульсації)
- [ ] Адаптація під мультимоніторні конфігурації

### Технічне
- [ ] Збірка в .exe через PyInstaller (однофайловий дистрибутив)
- [ ] NSIS/Inno Setup інсталятор
- [ ] Автооновлення з GitHub Releases
- [ ] Whisper.cpp бекенд для максимальної швидкості
- [ ] WebSocket сервер для зовнішніх інтеграцій
- [ ] Профілі налаштувань (робота, особисте, кодинг)
- [ ] Портативний режим (всі дані в одній папці, для флешки)

### Інтеграції
- [ ] VS Code розширення
- [ ] Obsidian плагін для голосових нотаток
- [ ] CLI: `voicetype --file audio.mp3 --output text.txt`
- [ ] Telegram бот -- голосове повідомлення в текст
- [ ] REST API сервер для локальної мережі

## Участь у розробці

Див. [CONTRIBUTING.md](CONTRIBUTING.md).

## Ліцензія

[MIT](LICENSE)

## Подяки

- [OpenAI Whisper](https://github.com/openai/whisper) -- модель розпізнавання мовлення
- [PyQt6](https://www.riverbankcomputing.com/software/pyqt/) -- GUI фреймворк
- [sounddevice](https://python-sounddevice.readthedocs.io/) -- запис аудіо
